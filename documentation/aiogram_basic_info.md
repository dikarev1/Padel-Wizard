# Базовая информация о фреймворке

# **aiogram**

**aiogram** is a modern and fully asynchronous framework for [Telegram Bot API](https://core.telegram.org/bots/api) written in Python 3.8+ using [asyncio](https://docs.python.org/3/library/asyncio.html) and [aiohttp](https://github.com/aio-libs/aiohttp).

Make your bots faster and more powerful!

## **Features**

- Asynchronous ([asyncio docs](https://docs.python.org/3/library/asyncio.html), [**PEP 492**](https://peps.python.org/pep-0492/))
- Has type hints ([**PEP 484**](https://peps.python.org/pep-0484/)) and can be used with [mypy](http://mypy-lang.org/)
- Supports [PyPy](https://www.pypy.org/)
- Supports [Telegram Bot API 9.2](https://core.telegram.org/bots/api) and gets fast updates to the latest versions of the Bot API
- Telegram Bot API integration code was [autogenerated](https://github.com/aiogram/tg-codegen) and can be easily re-generated when API gets updated
- Updates router (Blueprints)
- Has Finite State Machine
- Uses powerful [magic filters](https://docs.aiogram.dev/en/latest/dispatcher/filters/magic_filters.html#magic-filters)
- Middlewares (incoming updates and API calls)
- Provides [Replies into Webhook](https://core.telegram.org/bots/faq#how-can-i-make-requests-in-response-to-updates)
- Integrated I18n/L10n support with GNU Gettext (or Fluent)

**Warning**

It is strongly advised that you have prior experience working with [asyncio](https://docs.python.org/3/library/asyncio.html) before beginning to use **aiogram**.

### **Simple usage**

**`import** **asyncioimport** **loggingimport** **sysfrom** **os** **import** getenv

**from** **aiogram** **import** Bot, Dispatcher, html
**from** **aiogram.client.default** **import** DefaultBotProperties
**from** **aiogram.enums** **import** ParseMode
**from** **aiogram.filters** **import** CommandStart
**from** **aiogram.types** **import** Message

*# Bot token can be obtained via https://t.me/BotFather*TOKEN = getenv("BOT_TOKEN")

*# All handlers should be attached to the Router (or Dispatcher)*dp = Dispatcher()

**@dp**.message(CommandStart())
**async** **def** command_start_handler(message: Message) -> **None**:
    *"""    This handler receives messages with `/start` command    """# Most event objects have aliases for API methods that can be called in events' context# For example if you want to answer to incoming message you can use `message.answer(...)` alias# and the target chat will be passed to :ref:`aiogram.methods.send_message.SendMessage`# method automatically or call API method directly via# Bot instance: `bot.send_message(chat_id=message.chat.id, ...)`***await** message.answer(f"Hello, *{*html.bold(message.from_user.full_name)*}*!")

**@dp**.message()
**async** **def** echo_handler(message: Message) -> **None**:
    *"""    Handler will forward receive a message back to the sender    By default, message handler will handle all message types (like a text, photo, sticker etc.)    """***try**:
        *# Send a copy of the received message***await** message.send_copy(chat_id=message.chat.id)
    **except** TypeError:
        *# But not all the types is supported to be copied so need to handle it***await** message.answer("Nice try!")

**async** **def** main() -> **None**:
    *# Initialize Bot instance with default bot properties which will be passed to all API calls*bot = Bot(token=TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))

    *# And the run events dispatching***await** dp.start_polling(bot)

**if** __name__ == "__main__":
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
    asyncio.run(main())`

### **Usage without dispatcher**

Just only interact with Bot API, without handling events

**`import** **asynciofrom** **argparse** **import** ArgumentParser

**from** **aiogram** **import** Bot
**from** **aiogram.client.default** **import** DefaultBotProperties
**from** **aiogram.enums** **import** ParseMode

**def** create_parser() -> ArgumentParser:
    parser = ArgumentParser()
    parser.add_argument("--token", help="Telegram Bot API Token")
    parser.add_argument("--chat-id", type=int, help="Target chat id")
    parser.add_argument("--message", "-m", help="Message text to sent", default="Hello, World!")

    **return** parser

**async** **def** main():
    parser = create_parser()
    ns = parser.parse_args()

    token = ns.token
    chat_id = ns.chat_id
    message = ns.message

    **async** **with** Bot(
        token=token,
        default=DefaultBotProperties(
            parse_mode=ParseMode.HTML,
        ),
    ) **as** bot:
        **await** bot.send_message(chat_id=chat_id, text=message)

**if** __name__ == "__main__":
    asyncio.run(main())`